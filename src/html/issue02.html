@@include('inc/top.html')

<body>
  <div id="wrap">
    @@include('inc/header.html')
    <!-- Contents -->
    <div class="con_wrap">
      <div class="con_l">
        <div class="slide_tit flex_wrap f_sb">
          <h2>수동발령</h2>
        </div>
        <div class="slide_main none_scroll">
          <ul class="dot_list monitoring_detail">
            <li>
              <b><label for="type">승인요청</label></b>
              <select name="type">
                <option value="선택">선택</option>
                <option value="자연재난">자연재난</option>
              </select>
              <select name="type">
                <option value="선택">선택</option>
                <option value="호우">호우</option>
              </select>
              <select name="type">
                <option value="선택">선택</option>
                <option value="경보">경보</option>
              </select>
              <select name="type">
                <option value="선택">선택</option>
                <option value="발표">발표</option>
              </select>
            </li>
            <li>
              <b><label for="title">제&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;목</label></b>
              <input type="text" id="title" placeholder="제목을 입력하세요">
            </li>
            <li>
              <b><label for="situation1">재난상황</label></b>
              <ul class="media_select">
                <li>
                  <input checked type="radio" name="situation" id="situation1">
                  <label for="situation1">실제</label>
                </li>
                <li>
                  <input type="radio" name="situation" id="situation2">
                  <label for="situation2">훈련</label>
                </li>
                <li>
                  <input type="radio" name="situation" id="situation3">
                  <label for="situation3">테스트</label>
                </li>
              </ul>
            </li>
            <li>
              <b><label for="type1">발령매체</label></b>
              <ul class="media_select">
                <li>
                  <input checked type="checkbox" id="type1">
                  <label for="type1">지자체</label>
                </li>
                <li>
                  <input type="checkbox" id="type2">
                  <label for="type2">민간</label>
                </li>
                <li>
                  <input type="checkbox" id="type3">
                  <label for="type3">유관기관</label>
                </li>
                <li>
                  <input checked type="checkbox" id="type4">
                  <label for="type4">모바일</label>
                </li>
              </ul>
            </li>
            <li>
              <b>발생시각</b>
              <span class="datetimepicker_wrap">
                <input type="text" id="datetimepicker" class="input_calendar" value="발생시각 선택">
              </span>
              <button type="button" class="btn_s btn_blue" style="vertical-align:middle;">현재시각</button>
            </li>
            <li>
              <b><label for="locate">송출지역</label></b>
              <textarea name="locate" disabled placeholder="우측에서 선택해 주세요"></textarea>
              <div class="btn_wrap alignR">
                <button type="button" class="btn_m btn_blue">문안생성</button>
              </div>
            </li>
          </ul>
          <ul class="monitoring_detail monitoring_text">
            <li>
              <div class="flex_wrap f_sb">
                <b>발령문안(전광판)</b>
                <p class="alignR"><span id="nowByte">39</span>/80 bytes</p>
              </div>
              <textarea id="sms_templete" title="text_example"
                onkeyup="fn_checkByte(this)">Lorem ipsum dolor sit amet, consectetur</textarea>
            </li>
            <script>
              function fn_checkByte(obj) {
                const maxByte = 80; //최대 90바이트
                const text_val = obj.value; //입력한 문자
                const text_len = text_val.length; //입력한 문자수

                let totalByte = 0;
                for (let i = 0; i < text_len; i++) {
                  const each_char = text_val.charAt(i);
                  const uni_char = escape(each_char) //유니코드 형식으로 변환
                  if (uni_char.length > 4) {
                    // 한글 : 2Byte
                    totalByte += 2;
                  } else {
                    // 영문,숫자,특수문자 : 1Byte
                    totalByte += 1;
                  }
                }
                if (totalByte > maxByte) {
                  alert('최대 80Byte까지만 입력가능합니다.');
                  document.getElementById("nowByte").innerText = totalByte;
                  document.getElementById("nowByte").style.color = "red";
                } else {
                  document.getElementById("nowByte").innerText = totalByte;
                  document.getElementById("nowByte").style.color = "#3c7ed3";
                }
              }
            </script>

            <li>
              <div class="flex_wrap f_sb">
                <b>발령문안(버스정보)</b>
                <p class="alignR"><span id="nowByte2">79</span>/180 bytes</p>
              </div>
              <textarea id="sms_templete2" title="text_example"
                onkeyup="fn_checkByte2(this)">Lorem ipsum dolor sit amet, consectetur Lorem ipsum dolor sit amet, consectetur</textarea>
            </li>
            <script>
              function fn_checkByte2(obj) {
                const maxByte = 180; //최대 90바이트
                const text_val = obj.value; //입력한 문자
                const text_len = text_val.length; //입력한 문자수

                let totalByte = 0;
                for (let i = 0; i < text_len; i++) {
                  const each_char = text_val.charAt(i);
                  const uni_char = escape(each_char) //유니코드 형식으로 변환
                  if (uni_char.length > 4) {
                    // 한글 : 2Byte
                    totalByte += 2;
                  } else {
                    // 영문,숫자,특수문자 : 1Byte
                    totalByte += 1;
                  }
                }
                if (totalByte > maxByte) {
                  alert('최대 180Byte까지만 입력가능합니다.');
                  document.getElementById("nowByte2").innerText = totalByte;
                  document.getElementById("nowByte2").style.color = "red";
                } else {
                  document.getElementById("nowByte2").innerText = totalByte;
                  document.getElementById("nowByte2").style.color = "#3c7ed3";
                }
              }
            </script>

            <li>
              <div class="flex_wrap f_sb">
                <b>발령문안(모바일)</b>
                <p class="alignR"><span id="nowByte3">102</span>/315 bytes</p>
              </div>
              <textarea id="sms_templete2" title="text_example3"
                onkeyup="fn_checkByte3(this)">Lorem ipsum dolor sit amet, consectetur adipiscing elit. Praesent placerat sem a consectetur eleifend.</textarea>
            </li>
            <script>
              function fn_checkByte3(obj) {
                const maxByte = 315; //최대 90바이트
                const text_val = obj.value; //입력한 문자
                const text_len = text_val.length; //입력한 문자수

                let totalByte = 0;
                for (let i = 0; i < text_len; i++) {
                  const each_char = text_val.charAt(i);
                  const uni_char = escape(each_char) //유니코드 형식으로 변환
                  if (uni_char.length > 4) {
                    // 한글 : 2Byte
                    totalByte += 2;
                  } else {
                    // 영문,숫자,특수문자 : 1Byte
                    totalByte += 1;
                  }
                }
                if (totalByte > maxByte) {
                  alert('최대 315Byte까지만 입력가능합니다.');
                  document.getElementById("nowByte3").innerText = totalByte;
                  document.getElementById("nowByte3").style.color = "red";
                } else {
                  document.getElementById("nowByte3").innerText = totalByte;
                  document.getElementById("nowByte3").style.color = "#3c7ed3";
                }
              }
            </script>

          </ul>
          <div class="alignR">
            <button type="button" class="btn_approval btn_l btn_blue">승인요청</button>
          </div>
        </div>
      </div>
      <div class="con_r issue02">
        <div class="cont_body">
          <div class="tab box_tab">
            <ul class="tab_list">
              <li><a href="#tab01" class="on">지도에서 선택</a></li>
              <li><a href="#tab02">목록에서 선택</a></li>
              <li><a href="#tab03">그룹지역 선택</a></li>
            </ul>
          </div>
          <div class="tab_conts">
            <div id="tab01" class="tab_cont">
              <div>
                <div>
                  <h3>선택된 송출지역</h3>
                </div>
                <div class="selectlocate_wrap flex_wrap f_sb">
                  <ul>
                    <li>
                      <span>강원도</span>
                      <i class="axi axi-close"></i>
                    </li>
                    <li>
                      <span>충청북도</span>
                      <i class="axi axi-close"></i>
                    </li>
                    <li>
                      <span>세종특별자치시</span>
                      <i class="axi axi-close"></i>
                    </li>
                  </ul>
                  <button class="btn_skyblue">송출지역 적용</button>
                </div>
              </div>
              <div class="select_map">

              </div>
            </div>

            <div id="tab02" class="tab_cont">
              <div>
                <div>
                  <h3>선택된 송출지역</h3>
                </div>
                <div class="selectlocate_wrap flex_wrap f_sb">
                  <ul>
                    <li>
                      <span>강원영동</span>
                      <i class="axi axi-close"></i>
                    </li>
                    <li>
                      <span>세종특별자치시</span>
                      <i class="axi axi-close"></i>
                    </li>
                  </ul>
                  <button class="btn_skyblue">송출지역 적용</button>
                </div>
              </div>
              <div class="select_map">

              </div>
            </div>

            <div id="tab03" class="tab_cont">
              <div>
                <div>
                  <h3>선택된 송출지역</h3>
                </div>
                <div class="selectlocate_wrap flex_wrap f_sb">
                  <ul>
                    <li>
                      <span>강원영동</span>
                      <i class="axi axi-close"></i>
                    </li>
                    <li>
                      <span>세종특별자치시</span>
                      <i class="axi axi-close"></i>
                    </li>
                  </ul>
                  <button class="btn_skyblue">송출지역 적용</button>
                </div>
              </div>
              <div class="select_map">

              </div>
            </div>
          </div>
        </div>
      </div>
      @@include('inc/toast.html')
    </div>
    <!-- // Contents -->
  </div>
  @@include('inc/p_issue01.html')
  @@include('inc/script.html')

  <script>
    $('.btn_detailsearch').on('click', function () {
      $(this).toggleClass('on');
      $(this).prev('.detailsearch_wrap').slideToggle();
    })
    $(".btn_reason").on('click', function () {
      $('.p_issue01').parent('.pop_overlay').fadeIn();
    })
  </script>
</body>

</html>