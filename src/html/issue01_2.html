@@include('inc/top.html')

<body>
  <div id="wrap">
    @@include('inc/header.html')
    <!-- Contents -->
    <div class="con_wrap">
      <div class="con_l">
        <div class="slide_tit flex_wrap f_sb">
          <h2>발령현황</h2>
        </div>
        <div class="slide_main">
          <div class="alignR">
            <a href="./issue01.html" class="btn_s btn_grayline">목록보기</a>
          </div>
          <div class="disaster_type flex_wrap">
            <h3 class="heavy_rain">호우경보 발표</h3>
            <ul class="type_wrap">
              <li class="auto"></li>
            </ul>
          </div>
          <ul class="dot_list monitoring_detail">
            <li>
              <b>승인요청</b>
              <ul class="breadcrumb">
                <li>자연재난</li>
                <li>호우</li>
                <li>경보</li>
                <li>발표</li>
              </ul>
            </li>
            <li>
              <b>발령매체</b>
              <ul class="media_select">
                <li>
                  <input checked type="checkbox" id="type1">
                  <label for="type1">지자체</label>
                </li>
                <li>
                  <input disabled type="checkbox" id="type2">
                  <label for="type2">민간</label>
                </li>
                <li>
                  <input disabled type="checkbox" id="type3">
                  <label for="type3">유관기관</label>
                </li>
                <li>
                  <input disabled type="checkbox" id="type4">
                  <label for="type4">모바일</label>
                </li>
              </ul>
            </li>
            <li>
              <b>발생시각</b>
              <span>2020-08-12 12:30:56</span>
            </li>
            <li class="list_area">
              <b>발생지역</b>
              <span>서울특별시 구로구</span>
              <span>서울특별시 금천구</span>
            </li>
          </ul>
          <div class="alignC">
            <img src="../images/img_main_02.png" alt="호우주의보 임시이미지">
          </div>
          <ul class="monitoring_detail monitoring_text">
            <li>
              <div class="flex_wrap f_sb">
                <b>발령문안(전광판)</b>
                <p class="alignR"><span id="nowByte">39</span>/90 bytes</p>
              </div>
              <textarea disabled id="sms_templete" title="text_example"
                onkeyup="fn_checkByte(this)">Lorem ipsum dolor sit amet, consectetur</textarea>
            </li>
            <script>
              function fn_checkByte(obj) {
                const maxByte = 90; //최대 90바이트
                const text_val = obj.value; //입력한 문자
                const text_len = text_val.length; //입력한 문자수

                let totalByte = 0;
                for (let i = 0; i < text_len; i++) {
                  const each_char = text_val.charAt(i);
                  const uni_char = escape(each_char) //유니코드 형식으로 변환
                  if (uni_char.length > 4) {
                    // 한글 : 2Byte
                    totalByte += 2;
                  } else {
                    // 영문,숫자,특수문자 : 1Byte
                    totalByte += 1;
                  }
                }
                if (totalByte > maxByte) {
                  alert('최대 90Byte까지만 입력가능합니다.');
                  document.getElementById("nowByte").innerText = totalByte;
                  document.getElementById("nowByte").style.color = "red";
                } else {
                  document.getElementById("nowByte").innerText = totalByte;
                  document.getElementById("nowByte").style.color = "#3c7ed3";
                }
              }
            </script>

            <li>
              <div class="flex_wrap f_sb">
                <b>발령문안(버스정보)</b>
                <p class="alignR"><span id="nowByte2">102</span>/180 bytes</p>
              </div>
              <textarea disabled id="sms_templete2" title="text_example2"
                onkeyup="fn_checkByte2(this)">Lorem ipsum dolor sit amet, consectetur adipiscing elit. Praesent placerat sem a consectetur eleifend.</textarea>
            </li>
            <script>
              function fn_checkByte2(obj) {
                const maxByte = 180; //최대 90바이트
                const text_val = obj.value; //입력한 문자
                const text_len = text_val.length; //입력한 문자수

                let totalByte = 0;
                for (let i = 0; i < text_len; i++) {
                  const each_char = text_val.charAt(i);
                  const uni_char = escape(each_char) //유니코드 형식으로 변환
                  if (uni_char.length > 4) {
                    // 한글 : 2Byte
                    totalByte += 2;
                  } else {
                    // 영문,숫자,특수문자 : 1Byte
                    totalByte += 1;
                  }
                }
                if (totalByte > maxByte) {
                  alert('최대 180Byte까지만 입력가능합니다.');
                  document.getElementById("nowByte2").innerText = totalByte;
                  document.getElementById("nowByte2").style.color = "red";
                } else {
                  document.getElementById("nowByte2").innerText = totalByte;
                  document.getElementById("nowByte2").style.color = "#3c7ed3";
                }
              }
            </script>

          </ul>
          <div>
            <button type="button" class="btn_approval btn_l btn_blue">발령승인</button>
            <button type="button" class="btn_reject btn_l btn_skyblue">반려</button>
            <button type="button" class="btn_l btn_gray">수정요청</button>
          </div>
        </div>
        <div class="btn_slide"></div>
      </div>
      <div class="con_r">
        <div class="weather_wrap">
          <span class="btn_weather sunny on">23℃ 맑음</span>
          <div class="con_weather">
            <div class="flex_wrap f_sb">
              <h3>
                <span>서울시 금천구</span>
                <span>(15시 기준)</span>
              </h3>
              <button class="btn_weather_close">
                <i class="axi axi-close"></i>
              </button>
            </div>
            <div>
              <img src="../images/img_weather.png" alt="날씨 임시 이미지">
            </div>
          </div>
        </div>
        <div class="request_wrap" id="draggable">
          <div class="request_spot rain" style="position:absolute;top:22%;left:36%;">
            <span>호우경보 발표</span>
            <ul class="type_wrap">
              <li class="request"></li>
            </ul>
          </div>
          <img src="../images/bg_main_02.png" alt="임시 배경">
        </div>
      </div>
      @@include('inc/toast.html')
    </div>
    <!-- // Contents -->
  </div>
  @@include('inc/script.html')
  @@include('inc/p_main03_1.html')
  @@include('inc/p_main03_2.html')

  <script>
    $(".btn_approval").on('click', function () {
      $('.p_main03_1').parent('.pop_overlay').fadeIn();
    })
    $(".btn_reject").on('click', function () {
      $('.p_main03_2').parent('.pop_overlay').fadeIn();
    })
  </script>
</body>

</html>